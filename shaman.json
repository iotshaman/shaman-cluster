{
	"name": "shaman-cluster",
	"projects": [
		{
			"name": "shaman-cluster-root-api",
			"environment": "node",
			"template": "node-express-server",
			"path": "root-server",
			"include": [
				"shaman-cluster-lib",
				"service-bus-client"
			],
      "specs": {
        "executable": true,
        "publish": [
          {
            "instruction": "copy",
            "arguments": [
              {
								"from": "app/config/app.config.sample.json",
								"to": "app/config/app.config.json"
							},
							{
								"from": "app/data/schema.sql",
								"to": "app/data/schema.sql"
							},
							{
								"from": "../shaman.root.json",
								"to": "../shaman.root.json"
							}
            ]
          },
					{
            "instruction": "json",
            "arguments": [
              {
								"path": "../package.json",
								"replace": {
									"scripts": {
										"restore": "sf install"
									}
								}
							},
							{
								"path": "package.json",
								"replace": {
									"scripts": {
										"start": "node ./bin/app.service.js",
										"setup": "node ./bin/setup.js"
									}
								}
							}
            ]
          }
        ]
      }
		},
		{
			"name": "shaman-cluster-minion-api",
			"environment": "node",
			"template": "node-express-server",
			"path": "minion-server",
			"include": [
				"shaman-cluster-lib",
				"service-bus-client"
			],
      "specs": {
        "executable": true,
        "publish": [
          {
            "instruction": "copy",
            "arguments": [
              {
								"from": "app/config/app.config.sample.json",
								"to": "app/config/app.config.json"
							},
							{
								"from": "../shaman.minion.json",
								"to": "../shaman.minion.json"
							},
							{
								"from": "app/data/.gitkeep",
								"to": "app/data/.gitkeep"
							}
            ]
          },
					{
            "instruction": "json",
            "arguments": [
              {
								"path": "package.json",
								"replace": {
									"scripts": {
										"start": "node ./bin/app.service.js",
										"setup": "node ./bin/setup.js"
									}
								}
							}
            ]
          }
        ]
      }
		},
		{
			"name": "shaman-cluster-lib",
			"environment": "node",
			"template": "node-typescript-library",
			"path": "cluster-lib"
		},
		{
			"name": "service-bus-api",
			"environment": "node",
			"template": "node-express-server",
			"path": "service-bus/service-bus-api",
      "specs": {
        "executable": true,
        "publish": [
          {
            "instruction": "copy",
            "arguments": [
              {
								"from": "app/config/app.config.sample.json",
								"to": "app/config/app.config.json"
							},
							{
								"from": "app/data/schema.sql",
								"to": "app/data/schema.sql"
							}
            ]
          },
					{
            "instruction": "json",
            "arguments": [
              {
								"path": "package.json",
								"replace": {
									"scripts": {
										"start": "node ./bin/app.service.js",
										"setup": "node ./bin/setup.js"
									}
								}
							}
            ]
          }
        ]
      }
		},
		{
			"name": "service-bus-client",
			"environment": "node",
			"template": "node-typescript-library",
			"path": "service-bus/service-bus-client"
		}
	],
	"transform": []
}